<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Game Dashboard</title>
  <meta name="theme-color" content="#4338ca">
  <link rel="apple-touch-icon" href="/static/apple-touch-icon.jpg">
  <link rel="manifest" href="/static/manifest.webmanifest">
  <link rel="stylesheet" href="/static/styles.css">
</head>
<body>
  <div id="app">
    <header class="topbar">
      <div class="topbar-left">
        <button id="btn-back-main" class="ghost back-btn hidden">돌아가기</button>
        <h1>게임 목록</h1>
      </div>
      <div class="topbar-right">
        <button id="auth-toggle" class="pill small muted">뷰어</button>
        <div id="auth-panel" class="auth-panel hidden">
          <form id="auth-form" class="stack">
            <label class="auth-label">
              <span>편집 암호</span>
              <input type="password" id="auth-input" placeholder="편집 암호를 입력하세요" autocomplete="current-password">
            </label>
            <label class="inline-check">
              <input type="checkbox" id="auth-remember">
              <span>이 기기 기억하기</span>
            </label>
            <div class="row compact">
              <button type="submit" id="auth-submit" class="small-btn">확인</button>
              <button type="button" id="auth-cancel" class="ghost small-btn">취소</button>
            </div>
          </form>
        </div>
      </div>
    </header>

    <main class="layout">
      <section class="alert-banner hidden" id="alert-banner">
        <button class="alert-line alert-toggle" id="alert-line1" type="button"></button>
        <p class="alert-line hidden" id="alert-line2"></p>
        <button class="alert-line alert-toggle" id="alert-spending-line" type="button"></button>
        <p class="alert-line hidden" id="alert-spending-list"></p>
        <button class="alert-line alert-toggle" id="alert-refresh-line" type="button"></button>
        <p class="alert-line refresh-list hidden" id="alert-refresh-list"></p>
      </section>

      <section class="gallery" id="gallery" aria-label="게임 목록"></section>
      <section class="detail hidden" id="detail" aria-label="게임 상세">
        <div id="detail-empty" class="placeholder">게임을 선택하세요</div>
        <div id="detail-content" class="hidden">
          <div class="detail-header">
            <div>
              <p class="pill" id="detail-playtime"></p>
              <div class="title-row">
                <img id="detail-icon" class="game-icon hidden" alt="">
                <h2 id="detail-title"></h2>
              </div>
              <p class="meta" id="detail-dates"></p>
              <p class="meta" id="detail-refresh"></p>
            </div>
            <button id="btn-end-game" class="ghost">이제 이 게임 안 해요</button>
          </div>

          <div class="section">
            <div class="section-header">
              <h3>현재 게임 정보</h3>
              <a id="detail-coupon" href="#" target="_blank" class="link hidden">쿠폰 바로가기</a>
            </div>
            <div class="info-grid" id="game-info"></div>
            <p id="gacha-message" class="gacha-message"></p>
            <div id="memo-toggle" class="memo-toggle hidden">
              <button id="btn-memo-toggle" class="ghost">메모 보기</button>
              <div id="memo-box" class="memo-box hidden">
                <div id="memo-display"></div>
                <textarea id="memo-input" rows="3" placeholder="메모를 입력하세요"></textarea>
                <button id="btn-memo-save" class="small-btn">메모 저장</button>
              </div>
            </div>
          </div>

          <div class="section hidden" id="task-section">
            <div class="section-header">
              <h3>숙제 관리</h3>
              <div class="row compact task-actions">
                <button id="task-edit-toggle" class="ghost small-btn hidden">편집하기</button>
                <button id="task-edit-save" class="small-btn hidden">저장</button>
                <button id="task-edit-cancel" class="ghost small-btn hidden">취소</button>
              </div>
            </div>
            <div class="task-block hidden" id="task-daily">
              <p class="task-hint" id="task-daily-hint"></p>
              <p class="task-title">오늘의 숙제는 다 하셨나요?</p>
              <div class="task-parent-row">
                <label class="task-master">
                  <input type="checkbox" id="task-daily-master">
                  <span>햇슴</span>
                </label>
                <button type="button" class="ghost small-btn caret-btn" id="task-daily-toggle" aria-expanded="true">접기</button>
              </div>
              <div class="task-list indented" id="task-daily-list"></div>
            </div>
            <div class="task-block hidden" id="task-weekly">
              <p class="task-hint" id="task-weekly-hint"></p>
              <p class="task-title">이번 주 숙제는 다 하셨나요?</p>
              <div class="task-list" id="task-weekly-list"></div>
            </div>
            <div class="task-block hidden" id="task-monthly">
              <p class="task-hint" id="task-monthly-hint"></p>
              <p class="task-title">이번 달 숙제는 다 하셨나요?</p>
              <div class="task-list" id="task-monthly-list"></div>
            </div>
          </div>

          <div class="section" id="spending-section">
            <div class="section-header">
              <h3>월정액 관리</h3>
            </div>
            <div id="spending-list" class="list"></div>
          </div>

          <div class="section" id="currency-section">
            <div class="section-header">
              <h3>재화 관리</h3>
            </div>
            <div class="graph-card">
              <div class="graph-header">
                <div class="chip-row" id="currency-filters"></div>
              </div>
              <canvas id="currency-chart" height="180"></canvas>
            </div>
            <div id="currency-list" class="list"></div>
          </div>

            <div class="section">
              <div class="section-header">
                <h3>이벤트</h3>
              </div>
              <form id="event-form" class="stack">
                <div class="row">
                  <input required name="title" placeholder="이벤트명">
                  <select required name="type" id="event-type">
                    <option value="">분류 선택</option>
                    <option value="업데이트">업데이트</option>
                    <option value="스토리">스토리</option>
                    <option value="픽업">픽업</option>
                    <option value="컨텐츠">컨텐츠</option>
                    <option value="파밍">파밍</option>
                    <option value="시즌">시즌</option>
                    <option value="주년">주년</option>
                    <option value="페이백">페이백</option>
                  </select>
                </div>
                <div class="row">
                  <input required type="date" name="start_date">
                  <input type="date" name="end_date">
                  <select required name="priority" id="event-priority">
                    <option value="">중요도 선택</option>
                    <option value="매우낮음">매우낮음</option>
                    <option value="낮음">낮음</option>
                    <option value="중간">중간</option>
                    <option value="높음">높음</option>
                    <option value="매우높음">매우높음</option>
                  </select>
                </div>
                <div class="row space-between">
                  <button type="submit" id="event-submit-btn">이벤트 추가</button>
                  <button type="button" id="event-reset-btn" class="ghost small-btn">폼 초기화</button>
                </div>
            </form>
            <div id="event-list" class="list"></div>
          </div>

          <div class="section">
            <div class="section-header">
              <h3>캐릭터</h3>
            </div>
            <div id="character-filters" class="filter-row">
              <input type="number" id="filter-level" placeholder="레벨 이상">
              <input type="number" id="filter-overpower" placeholder="돌파 이상">
              <select id="filter-grade"><option value="">등급 전체</option></select>
              <select id="filter-position"><option value="">포지션 전체</option></select>
              <button id="filter-reset" class="ghost small-btn">초기화</button>
            </div>
            <div id="character-list" class="list"></div>
          </div>
        </div>
      </section>
    </main>
    <p class="version-text" id="version-text-main"></p>
  </div>

  <template id="game-card-template">
    <article class="card">
      <div class="thumb"></div>
      <div class="card-body">
        <div class="card-title-row">
          <img class="game-icon small hidden" alt="">
          <h4 class="card-title"></h4>
        </div>
        <p class="pill small"></p>
        <div class="task-badges hidden">
          <span class="badge" data-type="daily">일</span>
          <span class="badge" data-type="weekly">주</span>
          <span class="badge" data-type="monthly">월</span>
        </div>
      </div>
    </article>
  </template>

  <script src="/static/script.js"></script>
</body>
</html>
